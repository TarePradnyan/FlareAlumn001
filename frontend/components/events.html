<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alumni Events - FlareAlumns</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://use.typekit.net/yjp3aho.css" />
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'sofia': ['sofia-pro', 'sans-serif'],
          },
        },
      },
    };
  </script>
</head>
<body class="font-sofia bg-gray-50 min-h-screen">

  <!-- Navbar (unchanged) -->
  <nav class="bg-white shadow-sm border-b border-gray-200" data-id="main-navbar">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <a href="/" class="flex items-center space-x-2" data-id="logo-link">
            <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
              <i data-lucide="graduation-cap" class="w-5 h-5 text-white"></i>
            </div>
            <span class="text-xl font-bold text-gray-900">AlumniConnect</span>
          </a>
        </div>

        <div class="hidden md:flex items-center ml-[10px] space-x-8">
          <a href="/comm" class="text-gray-700 hover:text-blue-600 transition-colors">Community</a>
          <a href="/dashboard" class="text-gray-700 hover:text-blue-600 transition-colors">Dashboard</a>
          <a href="/alumni_directory" class="text-gray-700 hover:text-blue-600 transition-colors">Alumni Directory</a>
          <a href="/events" class="text-gray-700 hover:text-blue-600 transition-colors">Events</a>
          <a href="/mentorship" class="text-gray-700 hover:text-blue-600 transition-colors">Mentorship</a>
          <a href="/donations" class="text-gray-700 hover:text-blue-600 transition-colors">Donations</a>
          <div class="flex items-center gap-4">
            <span class="pl-[20px] text-gray-900 font-medium whitespace-nowrap">
              {{ user.name }}
            </span>
            <img src="{{ pic }}" class="w-10 h-10 rounded-full border border-gray-300 object-cover shadow" alt="Profile" />
            <a href="/logout">
              <button class="bg-green-500 hover:bg-red-500 px-4 py-1 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded transition shadow-sm border border-gray-300 font-semibold">
                Logout
              </button>
            </a>
          </div>
        </div>

        <div class="md:hidden">
          <button id="mobile-menu-button" class="text-gray-700 hover:text-blue-600 transition-colors">
            <i data-lucide="menu" class="w-6 h-6"></i>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Page Heading -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 bg-gradient-to-r from-purple-700 to-purple-900 text-white text-center rounded-b-lg shadow-lg">
    <h1 class="text-4xl font-extrabold mb-2">Alumni Events</h1>
    <p class="mb-6 text-lg">Connect, celebrate, and create lasting memories with your alumni network</p>
    <button id="openEventModal" class="inline-flex items-center space-x-2 bg-white text-purple-700 font-semibold rounded-full px-6 py-2 shadow hover:bg-gray-100 transition">
      <i data-lucide="plus" class="w-5 h-5"></i><span>Create Event</span>
    </button>
  </div>

  <!-- Modal Backdrop -->
  <div id="eventModalBackdrop" class="fixed inset-0 z-40 bg-black bg-opacity-50 hidden"></div>

  <!-- Modal Form -->
  <div id="eventModal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
    <form method="POST" action="/create_event" class="bg-white p-8 rounded-xl max-w-lg w-full shadow-lg space-y-4">
      <h2 class="text-2xl font-bold mb-2 flex items-center">
        <i data-lucide="calendar" class="mr-2"></i> Create New Event
      </h2>
      <input name="title" class="w-full border px-4 py-2 rounded-lg" placeholder="Event Title" required />
      <textarea name="description" class="w-full border px-4 py-2 rounded-lg" rows="3" maxlength="300" placeholder="Description (2-3 lines)" required></textarea>
      <div class="flex gap-4">
        <div class="flex-1">
          <label class="block text-gray-700 mb-1">Start Time</label>
          <input name="start_time" type="datetime-local" class="w-full border px-2 py-1 rounded-lg" required />
        </div>
        <div class="flex-1">
          <label class="block text-gray-700 mb-1">End Time</label>
          <input name="end_time" type="datetime-local" class="w-full border px-2 py-1 rounded-lg" required />
        </div>
      </div>
      <input name="location" class="w-full border px-4 py-2 rounded-lg" placeholder="Event Location" required />
      <select name="category" class="w-full border px-4 py-2 rounded-lg" required>
        <option value="">Select Category</option>
        <option value="Reunion">Reunion</option>
        <option value="Webinar">Webinar</option>
        <option value="Workshop">Workshop</option>
      </select>
      <div class="flex justify-end">
        <button type="button" onclick="closeEventModal()" class="mr-3 px-4 py-2 border rounded-lg">Cancel</button>
        <button type="submit" class="px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Create</button>
      </div>
    </form>
  </div>

  <!-- Upcoming Events Content OUTSIDE modal -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h2 class="text-xl font-bold mb-3">Upcoming Events</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {% for event in events %}
      <div class="rounded-xl p-6 shadow-lg bg-gradient-to-r from-violet-500 to-blue-500 text-white relative">
        <div class="flex items-center mb-2">
          {% if event.category == 'Reunion' %}
          <i data-lucide="users" class="w-8 h-8 mr-2"></i>
          {% elif event.category == 'Webinar' %}
          <i data-lucide="video" class="w-8 h-8 mr-2"></i>
          {% elif event.category == 'Workshop' %}
          <i data-lucide="wrench" class="w-8 h-8 mr-2"></i>
          {% endif %}
          <h3 class="text-2xl font-medium">{{ event.title }}</h3>
        </div>
        <p>{{ event.description }}</p>
        <div class="mt-2 text-sm">
          <b>When:</b> {{ event.start_time.strftime('%d %b %Y, %I:%M %p') }} - {{ event.end_time.strftime('%I:%M %p') }} IST<br>
          <b>Where:</b> {{ event.location }}<br>
          <b>Category:</b> {{ event.category }}
        </div>
      </div>
      {% else %}
      <p>No upcoming events.</p>
      {% endfor %}
    </div>
  </main>

  <footer class="bg-gray-900 text-white" data-id="main-footer">
    <!-- Your existing footer content -->
  </footer>

  <script>
    document.getElementById('openEventModal').onclick = function () {
      document.getElementById('eventModal').classList.remove('hidden');
      document.getElementById('eventModalBackdrop').classList.remove('hidden');
    };
    function closeEventModal() {
      document.getElementById('eventModal').classList.add('hidden');
      document.getElementById('eventModalBackdrop').classList.add('hidden');
    }
  </script>
  <script>lucide.createIcons();</script>
</body>
</html>
